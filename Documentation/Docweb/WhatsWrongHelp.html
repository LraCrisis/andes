<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Kurt VanLehn">
   <meta name="GENERATOR" content="Mozilla/4.74 [en] (Win98; U) [Netscape]">
   <title>Andes2 Whats Wrong Help module</title>
</head>
<body>

<center>
<h2>
The What's wrong help module</h2></center>

<center>(as of 7/24/01)</center>

<p>(For a discussion of the design, see <a href="DesignDiscussion/ShouldBugsBeUsedForAllErrors.html">here</a>
and <a href="DesignDiscussion/WhatsWrongPedagogicalGoals.html">here</a>.)&nbsp;
The what's-wrong module inputs a <a href="Base.html#Student entry">student
entry</a>.&nbsp; It outputs a <a href="Base.html#Tutor turn">tutor turn</a>
to be sent to the workbench and modifies in the ErrInterp field of the
given student entry.&nbsp; The tutor turn is what Andes says in response
to the student's help request.&nbsp; The contents of the ErrInterp field
determines what Andes will say if the student asks again what's wrong again
with this entry.
<h3>
Error interpretations</h3>
An error interpretation struct (Error-Interp) has these fields:
<ul>
<li>
<b>Intended</b>: An interpretation (list of <a href="Base.html#System entry">system
entries</a>) that represent our best hypothesis about what the student
was apparently trying to do.&nbsp; It will be NIL if no interpretation
was found.&nbsp; It will be a singleton list if the student entry is a
non-equation.</li>

<li>
<b>State</b>: An atom representing whether the State of intended interpretation.&nbsp;
It is equal to one of: the following global variables:</li>

<ul>
<li>
**forbidden**&nbsp;&nbsp; The interpretation has a forbidden entry in it.</li>

<li>
**premature-entry** The interpretation has a premature entry in it.&nbsp;
That is, some other entry must be done before this one.</li>

<li>
**premature-subst** The interpretation is an equation that has had given
values substituted into it, but the student has not yet finished applying
principles.</li>

<li>
**done-already** All the entries in the interpretation have been made already
by the student.</li>

<li>
**inefficient** Some of the entries in the interpretation are part of an
inefficient solution path</li>

<li>
**no-interpretation**&nbsp; The student's intended interpretation was incoherent
or inappropriate to this problem.</li>
</ul>

<li>
<b>Remediation</b>: a tutor turn.</li>

<li>
<b>Diagnosis</b>: A lisp list whose car is the atom that names the error
handler and whose cdr is a list of arguments that identify this particular
instantiation of the error handler.</li>

<li>
<b>Class</b>: The <a href="#error class">error class struct</a> that created
this interpretation.</li>

<li>
<b>Bindings</b>: The binding list generated by the error condition struct's
matching.</li>

<li>
<b>Expected-Utility</b>:&nbsp; A number representing the "worth" of adopting
this error interpretation.</li>
</ul>

<h3>
An example</h3>
For instance, suppose the student entry given to what's wrong help is 0
= T-W*cos(30).&nbsp; Suppose the student has entered the correct equation
0 = W_x+T_x but has not yet entered the relevant projection equations,
which are: W_x=-W*sin(30) and T_x=T.&nbsp; The wrong-trig-function error
class returns one error interpretation.&nbsp; It has that an Intended field
that contains a student entry that represents 0=T-W*sin(30).&nbsp; The
Diagnosis field has (wrong-trig-function (cos (dnum 30 |deg|)) (sin (dnum
30 |deg|))).&nbsp;&nbsp; The Remediation is a tutor turn that gives the
following 3 hints in sequence:
<ol>
<li>
"Check your trigonometry."</li>

<li>
'(teach projection "Here is an easy way to calculate the component of a
vector along an axis.&nbsp; Let ThetaV be the angle as you move counterclockwise
from the horizontal to the vector (ThetaV appears in the Variables window).&nbsp;
Let ThetaAxis be the rotation of the x-axis from the horizotal (This number
appears in the Properties box of the axis, which you can get by right-clicking
on the axis).&nbsp; Then: V_x = V*cos(ThetaV-ThetaAxis) and V_y = V*sin(ThetaV-ThetaAxis).")</li>

<li>
(format nil "Replace ~a with ~a." (nlg wrong 'algebra) (nlg right 'algebra)</li>
</ol>

<h3>
General Procedure</h3>
When the module receives the student entry, there are two cases:
<ul>
<li>
If the error interpretation field of the input student entry is non-NIL,
then it contains an error interpretation from when the student asked earlier
what's wrong with this entry.&nbsp; The remediation field of the error
interpretation should contain a tutor turn for the message that was given
last time.&nbsp; The module leaves the error interpretation alone (except
changing the coloring slot of the tutor turn because whats-wrong doesn't
change anyones color but parse-andes, which sets some of the error interpretations,
does make equations red) and returns the remediation.&nbsp; Thus, a second
whats-wrong applied to the same entry will give the same hint sequence
over again, because most of the later hints don't make sense without the
earlier hints as context.</li>

<li>
If the error-interpretation field is NIL, then we need to find an interpretation
for this error and decide how to react to it.&nbsp; Finding an interpretation
means hypothesizing both the entry the student was trying to make (the
intended entry) and an explanation in terms of bugs or slips for why they
made the incorrect entry instead.&nbsp; Deciding how to react to an interpretation
means deciding whether to help the student make the intended entry or take
a different approach to solving the problem.&nbsp; For instance, if the
intended entry is forbidden, the tutor should certainly not help the student
make it.</li>
</ul>
The main problem is that there are often multiple interpretations for an
error.&nbsp; Thus, the module first generates all possible interpretations
(see <a href="#generating error interpretations">below</a>) then selects
one (see <a href="#selecting an error interpretation">below</a>).&nbsp;
The selection criteria are:
<ol>
<li>
<b>How many</b> slips or buggy pieces of knowledge are required to account
for the difference between the student's entry and a correct entry.&nbsp;
For instance, an interpretation where both the body and the agent of a
force are wrong is less likely than one where only the agent is wrong,
ceterus paribus.</li>

<li>
The <b>prior probability</b> of the slips and bugs.&nbsp; If one interpretation
is a missing negative sign (a very common slip) and the other is substituting
a force for a velociy (an&nbsp; uncommon slip), then the interpretation
with the common slip should be chosen.</li>

<li>
<a NAME="context probability"></a>Given the current state of the problem,
how <b>likely is it that the student would try to make the intended entry</b>?&nbsp;
For instance, suppose the problem has hardly been started and the student
enters S=18.2.&nbsp; One interpretation is that the student meant to enter
A=18.2, which is the correct answer to the whole problem.&nbsp; The other
interpretation is that the student meant to enter S=9.1, which is given
in the problem statement.&nbsp; The latter interpretation is more likely
because the problem solving is just getting started.</li>

<li>
Whereas the above considerations influence the probability of the interpretation,
another consideration is the <b>utility</b>.&nbsp; Decision theory says
that the tutor should pick the interpretation with the maximal expected
utility (MEU).&nbsp; For instance, if two interpretations are equally likely
but one would cause remediation of an important bug whereas the other would
involve merely correcting a slip, then the tutor should prefer the bug
remediation because it has higher pedagogical value.&nbsp; However, the
MEU can only be evaluated after the tutor has decided how to react.&nbsp;
Before evaluating the MEU, the module must decide, for each error interpretation,
whether it will help the student make the entry or whether it will suggest
another approach.</li>
</ol>
It is tricky to represent slips and bugs in such a way that the system
can combine them to explain a single student entry.&nbsp; Thus, Andes doesn't
do that.&nbsp; Instead, it assumes that common occurrences of multiple
bugs or slips are represented just like ordinary bugs or slips.
<p>In particular, each possible bug or slip (or common compound bug or
slip) is represented by an error class.&nbsp; The error class contains
an evaluation of the first two probabilities listed above.&nbsp; That is,
if the error classification represents a single bug or slip, then the probability
is just the prior probability of that bug or slip (number 2, above).&nbsp;
If the error class represents multiple bugs or slips, then the probability
is the product of their prior probabilities.
<p><a NAME="error class"></a>An error class struct (ErrorClass) has the
following fields:
<ul>
<li>
<b>Name</b> -- this atom doubles as the name of the lisp function to call
in order to generate a hint sequence.</li>

<li>
<b>Conditions</b> -- ordered list of conditions that are tested to determine
if the error classification is appropriate.&nbsp; Testing also binds ?variables
that appear in the remaining fields</li>

<li>
<b>Probability</b> -- a Lisp-evaluable form that returns a number in the
range [0,1].&nbsp;&nbsp; Usually just a number.&nbsp; Represents the frequency
of this error classification in the population of errors (ie., given a
million errors, how what percentage of them belong to this error classification?)</li>

<li>
<b>Utility</b> -- a Lisp-evaluable form that returns a positive or negative
floating point number.&nbsp; Usually just a number.&nbsp; Represents how
much pedagogical value is obtained by give the hint sequence associated
with this error classification.</li>

<li>
<b>Arguments</b> -- ordered list of values to pass into the hint sequence
generation function.</li>
</ul>
The error classes are defined in the file errors.cl using the following
macro:
<blockquote>(defErrorClass &lt;name> &lt;arguments>
<br>&nbsp;&nbsp; &lt;conditions>
<br>&nbsp;&nbsp; :probability &lt;probability>
<br>&nbsp;&nbsp; :utility &lt;utilitity>)</blockquote>

<h3>
<a NAME="generating error interpretations"></a>Generating error interpretations</h3>
The general procedure for interpreting an error is to loop over the list
of error classes and apply each one to the student entry.&nbsp; Each error
class returns a possibly empty set of error interpreations.&nbsp; These
interpretations ignore the solution context.&nbsp; They don't even look
at whether the intended entry is forbidden, premature, inefficient, etc.&nbsp;
The knowledge required to fold in the influence of context is general,
so it is outside the error classes.
<p>After the error classes have reported the context-free error interpretations,
the Contextualizer modifies them.&nbsp; It determines&nbsp; the State of
the interpreation (forbidden, etc.).&nbsp; Eventually, it should determine
the <a href="#context probability">third probability listed above</a>,
namely how like the intended entry is given the current state of the problem
solving.&nbsp; The contextualizer also adjusts the expected utility of
the error interpretation if necessary.
<h3>
<a NAME="selecting an error interpretation"></a>Selecting an error interpretation
and presenting its remediation</h3>
The procedure for deciding which error interpretation to return, given
the set of all possible error interpretations, is
<ul>
<li>
If the set of error interpretations is empty, then we create an default
error interpretation.</li>

<li>
Pick the error interpretation with the maximum expected utility.&nbsp;
If there is a tie, break it randomly.</li>
</ul>
Once an error interpretation has been selected, its remediation might have
to be modified depending on the State field.&nbsp;&nbsp; In particular,
if the State is Premature, Premature-subst, Forbidden, Done-already or
Inefficient, then the hint sequence has consed on to the front of it a
hint that explains the state (e.g., "The entry you appear to be making
is done already.&nbsp; If you want me to give you hints on how enter it
anyway, click on 'explain more.'").
<br>&nbsp;
</body>
</html>
