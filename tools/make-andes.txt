# Choose DOS style text files in cygwin and restart windows
# install make in cygwin by running "setup"

# cygwin git, by default, only works if the filesystem is mounted
#   binary.  (Might get it to work with linefeed conversion and textmode
#   mount, but haven't tried this.)  Instead, use msysgit install
#   and with the bash shell provided with git, checkout Andes2:
   cd /c/cygwin/home/Andministrator
   git clone ssh://bvds@andestutor.org/home/bvds/Andes2.git Andes2

# Microsoft visual studio install version 6.0 from 1998
#   vc32/setup.exe
#  modifications:  install MFC source code and 
#                  MFC source browser and
#                 run environment variables.
# Documentation c++ sdk, 
# optional:  Install latest service pack 
#    (6.0 for visual studio 6) from    
#   support.microsoft.com/kb/194022
#    run extractor
#    save extracted files into new folder, run setupsp6

make workbench 
# or in IDE, choose FBD/Fbd.dsw and choose 
# "Win32 OLI Release", build "Fbd-tcp.exe" need all three versions ...).
make solver
make installer

#  lnk.cl needed by Franz lisp, can be copied from distribution
cp /cygdrive/c/Program Files/acl81/examples/dll/lnk.cl ~/Andes2
# needs Franz lisp, modify path in makedll.cl and makehelp80.cl
make helpsys 
# need to exit lisp by hand.
# seems the tcp version is hanging

# download winzip standard and command line add-on
# to make distribution for use in oli course
tools/MakeDist.sh -oli

#-----------------------------------------------------------
#
#           setup oli accounts
#
# Apply for an andrew account
# The next step is to make sure you have one regular OLI account and one 
# web-iso account on both Odin and QA.
#
# So on qa, https://oli-qa.andrew.cmu.edu create an account using the 
#"Carnegie Mellon Users Log-in Here" link and your andrew id.
#
#On Odin, http://odin.web.cmu.edu create two accounts. One account using 
#the "Carnegie Mellon Users Log-in Here" link and your andrew id. The 
#second account using the main "Need an account?" link.
#
#Your account names can be the same on each server.
#
#  --------------------------------------------------------------
#
mkdir -p oli-course
#
# use cvs co command from tools/Andes-OLI.html with pass:andersoli
# edit oli-course/intro-physics-*/content/package.xml & update version number
#
make Statements
#
cp Problems/*.aps oli-course/intro_physics-*/
cd oli-course/intro_physics-*/
#  remove irrelevant *.aps files by hand. 
#  run the following with some unique identifier for output file
perl  ../../tools/aps2xml.pl *.aps > july-28-output.txt
#  use different output file for each run, so below grep will work.
#  It will complain about any problems that are included in aps files,
#     but not having feature Andes2.
grep Add *-output.txt 
#  If the grep reports any new files,  add them to cvs. 
cp -p ../../andes_installer.exe content/webcontent
#  Non-problem set specific content must be updated by hand (videos, etc). 
cvs commit -m "latest updates, blah blah"

#
#         Now switch to working on OLI machine
#

ssh andersw@odin.web.cmu.edu
pass:  andersoli
 cd /oli/private/andersw

cvs -d :ext:andersw@oli-cvs.andrew.cmu.edu:/oli/cvs/content/lrdc/intro_physics co -d intro_physics-1.9 intro_physics-1.0

cvs update -dP

cd intro_physics-1.9/
 cp log4j.properties.sample log4j.properties
ant

./tools/oli/deploy.sh

Account ID: andersw
Password: andersoli

odin.web.cmu.edu
login twice
"Create a new course"  this is what an instructor will do.
Create a new course
simple mode:  choose course
  (in principle, should make 3 different courses and test all combinations)
  choose Full course
"12345" is admit code (no password)
test course as student:  need to use internet explorer to instll certificate for the QA server.
  in IE, go to https://www.cmu.edu/computing/software/all/certs/download.html
  Can otherwise use firefox.   This is not an issue on the production server.

Need to update video instructions for firefox.
