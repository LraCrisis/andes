{
  "envelope": "JSON-RPC-2.0",
  "transport": "POST", 
  "target": "/help",
  "SMDVersion": "2.0",
  "parameters": [
    {"name": "session", "type": "integer"},
    {"name": "time", "type": "number"}
  ],
  "services": {
    "get-problem": {
      "parameters": [
	{"name": "user", "type": "string"},
	{"name": "problem", "type": "string"}
      ]
    },
    "solution-step": {
      "parameters": [
	{"name": "action", "type": "string",
	 "enum":["new-object","modify-object", "delete-object"]},
	{"name": "id",
	 "description": "Identifier for each drawn item, set by the creator of the object.  Used only by actions new-object, modify-object, and delete-object",
	 "type": "integer", "optional": true},
	{"name": "type",
	 "description": "kind of drawn object; manditory for new-object and optional for modify-object or delete-object",
	 "type": "string",
	 "enum": ["text", "graphics", "equation", "circle", "rectangle", "axes", "vector", "line"],
	 "optional": true
	},
	{"name": "mode",
	 "description": "manditory for new-object and optional for modify-object or delete-object\n  unknown:  turn black\n  correct:  turn green\n  wrong:  turn red\n  locked:  black, not user selectable\n  fade:  gray, not user selectable",
	 "type": "string",
	 "enum": ["unknown","right","wrong","locked","fade"],
	 "optional": true
	},
	{"name": "x", "type": "number", "optional": true},
	{"name": "y", "type": "number", "optional": true},
	{"name": "text-width", "type": "integer", "optional": true},
	{"name": "text", "type": "string", "optional": true},
	{"name": "dx", "type": "number", "optional": true},
	{"name": "dy", "type": "number", "optional": true},
	{"name": "radius", "type": "number", "optional": true},
	{"name": "symbol", "type": "string", "optional": true},
	{"name": "x-label", "type": "string", "optional": true},
	{"name": "y-label", "type": "string", "optional": true}
      ]
    },
    "seek-help": {
      "parameters": [
	{"name": "action", "type": "string",
	 "enum":["get-help","help-button","principles-menu"]},
	{"name": "href", "type": "string", "optional": true},
	{"name": "value", "type": "string", "optional": true},
	{"name": "text", "type": "string", "optional": true}
      ]
    },
    "close-problem": {
      "parameters": [
	{"name": "json smd bug: can't just inherit parameters and get named parameters", "type": "string", "optional": true}
      ]
    }
  },
  "returns": {
    "type": "array",
    "items": {
      "type": "object",
      "properties": {
	"action": {
	  "type": "string",
	  "description": "The choice get-help is only from the  client while\nthe choices set-score, show-hint, show-hint-link, and focus-hint-text-box are only from the server. \nLog actions are not read by the client and my be stripped from any response sent to the client.  This is just a first attempt at the client-server API, any suggestions are welcome.",
	  "enum":[
	    "new-object","modify-object", "delete-object", "log",
	    "get-help","help-button",
	    "set-score","show-hint","show-hint-link","focus-hint-text-box"
	  ]
	},
	"id": {
	  "description": "Identifier for each drawn item, set by the creator of the object.  Used only by actions new-object, modify-object, and delete-object",
	  "type": "integer",
	  "optional": true
	},
	"type": {
	  "description": "kind of drawn object; manditory for new-object and optional for modify-object or delete-object",
	  "type": "string",
	  "enum": [
	    "text", "graphics", "equation", "circle", "rectangle", "axes", "vector", "line"
	  ],
	  "optional": true
	},
	"mode": {
	  "description": "manditory for new-object and optional for modify-object or delete-object\n  unknown:  turn black\n  correct:  turn green\n  wrong:  turn red\n  locked:  black, not user selectable\n  fade:  gray, not user selectable",
	  "type": "string",
	  "enum": ["unknown","right","wrong","locked","fade"],
	  "optional": true
	},

	"score": {"type": ["object","number"], "optional": true}
	    
      }
    }
  }      
}
