<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
		"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
   <title>Andes3 problem server</title>
</head>
<body>


<p>We define the Andes Problem server as a distinct server that handles
an Andes session.&nbsp;  It also keeps track of the lisp helpsystem 
processes.&nbsp;  User login, authentification, keeping track of grades, 
<em>et c.</em> are handled by the WebAssign servers.

<p>Since the ASU team partners <a href="http://www.webassign.net/">
   WebAssign</a> and <a href="http://www.lon-capa.org/">LON-CAPA</a>) use 
  perl extensively, perl-based tools should be used on the Andes problem 
  server, when possible.

<p>There is also a log database on the Andes Problem server which stores
any previous solutions in the form of a list of client-server calls
indexed by user name, and problem name.&nbsp;  Previous work on the problem
can be reconstructed  simply by plassing the list 
through the help system and the user interface.&nbsp;  We have
not yet specified whether the web server script or the help system lisp
will access the log database.

<ol>

<li>    Student logs in to WebAssign, which authenticates, records the
IP address of the student, and generates a WebAssign session id, stored
as a cookie on the browser.

<li>    Student navigates to homework page that displays Andes problems.&nbsp;
This page is generated by WebAssign.

<li>   <strong id="start">PROBLEM START.</strong>&nbsp;
Student clicks on a link associated with a specific Andes problem.&nbsp;
The URL points to the Andes Problem server and contains the 
WebAssign sessions id, the problem id, and user name.&nbsp; 

<li>  Andes Problem server contacts WebAssign, sending
the user name, session id, and problem, to determine if the 
WebAssign session id is valid.

<li>  Andes Problem server get the OK from WebAssign.&nbsp;  It sets
a unique Andes session id (distinct from the WebAssign session id).&nbsp; 
It then returns the drawing program to the client with the 
Andes session id, user name, and problem name as tags in the html.
[Optionally, it also includes the problem statement and pre-defined
objects as json embedded in the web page.]

<li>The initial problem will also show any previous work 
that have been saved in the log database.

<li>  Andes Problem server connects to a free lisp help session on 
the server, sending the user name and problem name.

 <li>     When the student does an action, it is sent to the Problem server
(with Andes session ID) which passes it along to the appropriate Lisp.
&nbsp; Lisp generates a response and sends it to the Problem server (with
session ID) which passes it back to the client.&nbsp; 
See <a href="http://gideon.eas.asu.edu/web-UI/nokes-example-json.txt">
     for an example of the contents of a session</a>.

<li>  The student closes the problem (e.g., normally by the browsers back button).&nbsp;  The client tells Problem server to end the session.

<li>  Problem server tells the appropriate Lisp to end the problem.

<li>  The Problem server sends the
score on this problem to WebAssign along with the Student ID and problem
ID.

<li>  Student is now looking at the list of Andes problems on the
page supplied by WebAssign.&nbsp;
Go to the <a href="#start"><strong>PROBLEM START</strong></a> above.

</ol>

<p>If WebAssign knows that a student has logged out (or been logged out by
a sysadmin or instructor), then it sends an unsolicited message ot the
Andes Problem server, which stops the Andes session.

<p>If an instructor is using WebAssign to tutor students or view their
work, then the "student ID" has a bit which indicates instructor is
using it.&nbsp;  Andes copies the student historical files from that student
ID to this new ID and uses them to initialize the problem.

<hr>
</body>
</html>