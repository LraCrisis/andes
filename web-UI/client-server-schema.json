{
  "id": "sentence",
  "description": "One transaction item between client and server",

  "type": "object",
  "properties": {
    "action": {
      "type": "string",
      "description": "The choice get-help is only from the  client while\nthe choices set-score, show-hint, show-hint-link, and focus-hint-text-box are only from the server. \nLog actions are not read by the client and my be stripped from any response sent to the client.  This is just a first attempt at the client-server API, any suggestions are welcome.",
      "enum":["new-object","modify-object", "delete-object", "log",
      "get-help","help-button",
      "set-score","show-hint","show-hint-link","focus-hint-text-box"]
    },
    "id": {
      "description": "Identifier for each drawn item, set by the creator of the object.  Used only by actions new-object, modify-object, and delete-object",
      "type": "integer",
      "optional": true},
    "type": {
      "description": "kind of drawn object; manditory for new-object and optional for modify-object or delete-object",
      "type": "string",
      "enum": ["text", "graphics", "equation", "circle", "rectangle", "axes", "vector", "line"],
      "optional": true
    },
    "mode": {
      "description": "manditory for new-object and optional for modify-object or delete-object\n  unknown:  turn black\n  correct:  turn green\n  wrong:  turn red\n  locked:  black, not user selectable\n  fade:  gray, not user selectable",
      "type": "string",
      "enum": ["unknown","right","wrong","locked","fade"],
      "optional": true
    },
    "x":  {"type": "number", "optional": true},
    "y":  {"type": "number", "optional": true},
    "text-width":  {"type": "integer", "optional": true},
    "text":  {"type": "string", "optional": true},
    "dx":  {"type": "number", "optional": true},
    "dy":  {"type": "number", "optional": true},
    "radius":  {"type": "number", "optional": true},
    "symbol":  {"type": "string", "optional": true},
    "x-label":  {"type": "string", "optional": true},
    "y-label":  {"type": "string", "optional": true},
    "href":  {"type": "string", "optional": true},
    "value": {"type": "string", "optional": true}

    "score": {"type": ["object","number"], "optinal": true}
  }
}

{
  "description": "Andes3 client to server message, following json rpc",
  "type": "object",
  "properties" : {
    "jsonrpc": {"description": "version \"2.0\" required", "type": "string"},
    "method": {
      "type": "string",
      "enum": ["help","step"]
    },
    "params": {
      "extends": {"$ref": "sentence"},
      "properties": {
	"session": {
	  "description": "Identifier for each user session.  Since the lisp process may handle multiple sessions, this must be forwarded to the lisp process.",
	  "type": "integer"
	},
	"time": {
	  "description": "The number of seconds since some arbitrary start time set by the client.\nMay include decimal fractions;  the intent is to use the javascript\n   var t = new Date(); t.getTime()/1000-initialTime;\nThis should not be used to infer the absolute time associated with a user\nsession; absolute time on client machines cannot be trusted.",
	  "type": "number"}
      }
    }
    "id": "integer"
  }
}

{
  "description": "Andes3 server reply to client",
  "type": "object",

  "properties" : {
    "jsonrpc": {"type": "string"},
    "result": {
      "description": "mutually exclusive to error:",
      "type": "array",
      "items": {"$ref", "sentence"},
      "optional": true
    },
    "error": {
      "description": "mutually exclusive to result:",
      "type": "object",
      "optional": true,
      "properties": {
	"code": "integer",
	"message": "string",
	"data": {
	  "type": "any",
	  "optional": true
	}
      }
    }
    "id": ["integer",null],
  }
}
