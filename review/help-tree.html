<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>Demo Mail Application</title>

        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.3/dijit/themes/tundra/tundra.css">

<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/dojo/1.3/dojo/dojo.xd.js">
</script>

</head>
<body class="tundra">
	<div id="preLoader"><p></p></div>
	<div dojoType="dojo.data.ItemFileWriteStore" jsId="mailStore"
		url="mail.json"></div>
	<div dojoType="dojo.data.ItemFileWriteStore" jsId="contactStore"
		url="contacts.php"></div>

	<!-- Inline declaration for programmatically created "New Message" tabs -->
	<div dojoType="dijit.Declaration"
		widgetClass="mail.NewMessage">
		<div dojoType="dijit.layout.BorderContainer" dojoAttachPoint="container" title="Composing..." closeable="true">
			<div dojoType="dijit.layout.ContentPane" region="top" style="height:60px; overflow: visible; z-index: 10; color:#666;">
				<table width="100%">
					<tr style="padding-top:5px;">
						<td style="padding-left:20px; padding-right: 8px; text-align:right;"><label for="${id}_to">To:</label></td>
						<td width=100%>
							<input dojoType="dijit.form.ComboBox" id="${id}_to" hasDownArrow="false" store="contactStore" searchAttr="display"
								style="width: 40em;">
						</td>
					</tr>
					<tr>
						<td style="padding-left: 20px; padding-right:8px; text-align:right;"><label for="${id}_subject">Subject:</label></td>
						<td width=100%>
							<select dojoType="dijit.form.ComboBox" id="${id}_subject" hasDownArrow="false" style="width: 40em;">
								<option></option>
								<option>progress meeting</option>
								<option>reports</option>
								<option>lunch</option>
								<option>vacation</option>
								<option>status meeting</option>
							</select>
						</td>
					</tr>
				</table>
				<hr noshade size="1">
			</div>

			<!-- new message part -->
			<div dojoType="dijit.Editor" region="center" style="overflow:hidden"
	extraPlugins="['createLink','insertImage',{name:'dijit._editor.plugins.FontChoice', command: 'fontName', generic: true},'fontSize']"

>
<i> This is just a sample message. There is email-address auto-complete in the to: field.
<br><br> give it a whirl.
</i>
</div>
			<div dojoType="dijit.layout.ContentPane" region="bottom" style="height:32px" align="center">
				<button dojoType="dijit.form.Button" iconClass="mailIconOk"
				>Send
				<script type="dojo/method" event="onClick">
					var toField = dojo.byId("${id}_to");
					if (toField.value == ""){
						alert("Please enter a recipient address");
					}else{
						showSendBar();
					}
				</script>
				</button>
				<button dojoType="dijit.form.Button" iconClass="mailIconCancel" 
				>Cancel
				<script type="dojo/method" event="onClick">
					tabs.closeChild(tabs.selectedChildWidget);
				</script>
				</button>
			</div>
		</div>
	</div>



			<!-- main section with tree, table, and preview -->
			<div dojoType="dijit.layout.BorderContainer" id="inbox" title="Inbox" design="sidebar">
				<div dojoType="dijit.layout.AccordionContainer" id="accordion"
						region="leading" minSize="20" style="width:20%;" splitter="true">
					<div dojoType="dijit.layout.AccordionPane" title="Folders">
						<div dojoType="dijit.Tree" id="mytree" store="mailStore"
							childrenAttr="folders" query="{type:'folder'}" label="Folders">
							<script type="dojo/method" event="onClick" args="item">
								if(!item){
									return;	// top level node in tree doesn't correspond to any item
								}
								/* filter the message list to messages in this folder */
								table.setQuery({
									type: "message",
									folder: mailStore.getValue(item, "id")
								});
							</script>
							<script type="dojo/method" event="getIconClass" args="item">
								return (item && mailStore.getValue(item, "icon")) || "mailIconFolderDocuments";
							</script>
						</div>
					</div>
					<div dojoType="dijit.layout.AccordionPane" title="Search Messages">
						<form dojoType="dijit.form.Form" jsId="searchForm">
							<table>
								<tr>
									<td><label for="subjectSearch">Subject:</label></td>
									<td><input dojoType="dijit.form.TextBox" id="subjectSearch" name="label"></td>
								</tr>
								<tr>
									<td><label for="senderSearch">Sender:</label></td>
									<td><input dojoType="dijit.form.TextBox" id="senderSearch" name="sender"></td>
								</tr>
								<tr>
									<td><label for="bodySearch">Message text:</label></td>
									<td><input dojoType="dijit.form.TextBox" id="bodySearch" name="text"></td>
								</tr>
								<tr>
									<td colspan=2 align=center><button dojoType="dijit.form.Button" onClick="searchMessages">Search</button></td>
								</tr>
							</table>
						</form>
					</div>
				</div>  <!-- end of Accordion -->


				<!-- message preview pane -->
				<div id="message" dojoType="dijit.layout.ContentPane" region="center" role="region" aria-live="assertive" aria-atomic="true" minSize="20">
					<p>
					This is a simple application mockup showing some of the dojo widgets:
					</p>
					<ul>
					  <li>layout widgets: BorderContainer, AccordionContainer</li>
					  <li>TooltipDialog, Tooltip</li>
					  <li>Tree</li>
					  <li>form widgets: Button, DropDownButton, ComboButton, FilteringSelect, ComboBox</li>
					  <li>Editor</li>
					</ul>
					<p>
					The message list above originally contains all the messages, but you can filter it
					by clicking on items in the left Accordion.
					Then click on the messages in the above list to display them.
					There's no server running, so the app is just a facade and it doesn't really do anything.
					<!-- TODO: delete button (we can delete since we are using ItemFileWriteStore -->
					</p>
					<p>
					<span style="font-family: 'Comic Sans MS',Textile,cursive; color: blue; font-style: italic;">-- Bill</span>
					</p>
				</div> <!-- end of "message" -->

</body>
</html>
